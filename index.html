<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>工人扫码 - Angelina</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    h2 { color: #2c3e50; }
    #reader { margin: 20px auto; width: 300px; }
  </style>
</head>
<body>
  <h2>Welcome Angelina (A0001)</h2>
  <p>请扫描图纸上的 QR Code</p>
  <div id="reader"></div>

  <script>
    const html5QrCode = new Html5Qrcode("reader");

    function startScanning() {
      html5QrCode.start(
        { facingMode: "environment" }, // 使用后置摄像头
        { fps: 10, qrbox: 250 },
        (decodedText, decodedResult) => {
          console.log("扫描结果:", decodedText);

          // 扫到 URL 自动跳转
          if (decodedText.startsWith("http://") || decodedText.startsWith("https://")) {
            html5QrCode.stop().then(() => {
              window.location.href = decodedText;
            });
          }
        },
        (errorMessage) => {
          // 可以忽略扫描失败
        }
      ).catch(err => {
        console.error("扫描启动失败:", err);
      });
    }

    startScanning();
  </script>
</body>
</html>


